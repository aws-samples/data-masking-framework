{
    "id": "http://some.site.somewhere/entry-schema#",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "DatamaskConfProcess",
    "type": "object",
    "description": "JSON schema to the datamask-pyutil parameter file", 
    "properties": {
	"Jobs": {
	    "description": "List of Jobs",
	    "type": "array",
	    "items": {
		"type": "object",
		"properties": {
		    "JobName": { "type": "string", "description": "The Job name" },
		    "Active": { "type": "boolean", "description": "If False turn off the job processing" },
		    "Input": {
			"type": "object",
			"description": "Input properties",
			"properties": {
			    "InputPath": { "type": "string", "description": "The input path to be read" },
			    "RepartitionValue": { "type": "number", "description": "If set the process will try to repartition the input to better performance" },
			    "ReadFormat": { "type": "string", "description": "The read format, Examples: parquet, csv " },
			    "IntPartitions": {
				"type": "array",
				"description": "If input has partitions keys, this is the list of int partitions",
				"items": { "type": "string"}
				},
			    "ReadOptions": { 
				"type": "array", 
				"items": {
				    "type": "object",
				    "description": "The read options to use in the read process",
				    "properties": {
					"OptionName": { "type": "string", "description": "Option name" },
					"OptionValue": { "type": "string", "description": "Option Value" }
					},
					"additionalProperties": false,
					"required": ["OptionName", "OptionValue"]
				    } 
				}
			    },
			"additionalProperties": false,
			"required": ["InputPath", "ReadFormat"]
			},
		    "Output": {
			"type": "object",
			"description": "Output properties",
			"properties": {
			    "OutputPath": { "type": "string", "description": "The output path to write"  },
			    "OutputTable": { "type": "string", "description": "If set the process will try to update the table metadata"   },
			    "OutputDatabase": { "type": "string", "description": "If set the process will try to update the metadata, it needs to be set with  OutputTable"   },
			    "Coalesce": { "type": "number", "description": "If set the process will coalesce partitions before write in the output. This is usually the number of files to be write in the ouput path."   }
			    },
			"additionalProperties": false,
			"required": ["OutputPath"]
			},
		    "MaskFields": {
			"type": "array",
			"description": "List of Mask Field properties",
			"items": {
			    "type": "object",
			    "properties": {
				"Active": { "type": "boolean", "description": "If False turn off the mask field"   },
				"MaskFieldName": { "type": "string", "description": "Mask field name"   },
				"FieldName": { "type": "string", "description": "Filed Name"   },
				"FormatRE": { "type": "string", "description": "Regular expression RE to be procced. Use this expression to use just a field part"   },
				"DomainName": { "type": "string", "description": "Domain name to get mask configurations"   },
				"KeepMaskName": { "type": "boolean", "description": "If True process will keep the mask name, otherwise the mask field will renamed to the original field name"  }
				},
			"additionalProperties": false,
			    "required": ["Active", "MaskFieldName", "FieldName", "DomainName"] 
			    }
			}
		    },
		    "additionalProperties": false,
		    "required": ["JobName", "Active", "Input", "Output", "MaskFields"]
		}
	},
	"Domains": {
	    "type": "array",
	    "description": "List of data mask domains",
	    "items": {
		"type": "object",
		"properties": {
		    "DomainName": { "type": "string" , "description": "Domain name"  }, 
		    "SaltName": { "type": "string", "description": "The sal name to be searched inside the sal file"  }, 
		    "Layout": { "type": "string", "description": "Layout to be used to replace the salt and field. $SALT will be replaced by the sal value and $VALUE will be replaced by the field value" }, 
		    "MaskType": { "type": "string", "description": "Algorithm type to mask the field" }, 
			"EncryptKey": {"type": "string", "description": "Encryption key for Algorithm, only when you use aes_ctr and fte "},
		    "FieldAlias": { "type": "string", "description": "Field alias to be used in the Reverse dataset" }, 
		    "MaskFieldAlias": { "type": "string", "description": "Mask field alias to be used in the reverse dataset" }, 
		    "ReverseDataset": { 
			"type": "object", 
			"properties": {
			    "Active": { "type": "boolean", "description": "If False tur off the creation of the reverse dataset" },
			    "DatasetPath": { "type": "string", "description": "Reverse dataset path" }, 
			    "Coalesce": { "type": "number", "description": "If set the process will coalesce partitions before write in the reverse dataset. This is usually the number of files to be write in the ouput path" } 
			    },
			"additionalProperties": false,
			"required": ["Active", "DatasetPath"]
			} 
		    },
		    "additionalProperties": false,
		    "required": ["DomainName", "Layout","MaskType", "FieldAlias", "MaskFieldAlias"]
		}
	},
	"Salts": {
	    "type": "object",
	    "description": "Salt properties",
	    "properties": {
		"SaltsPath": { "type": "string", "description": "The salt path" }
	    },
	    "additionalProperties": false,
	    "required": ["SaltsPath"]
	},
	"Keys": {
	    "type": "object",
	    "description": "Key properties",
	    "properties": {
		"SaltsPath": { "type": "string", "description": "The encryption key path" }
	    },
	    "additionalProperties": false,
	    "required": ["KeysPath"]
	}
      },
    "additionalProperties": false,
    "required": ["Jobs", "Domains"],
     "definitions": {
     }
} 

